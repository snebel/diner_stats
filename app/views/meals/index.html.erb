
<h1 id='<%= @restaurant.id %>'>Statistics Generated at <%= link_to @restaurant.name, restaurant_path(@restaurant.id) %></h1>

<div class='panel panel-default'>
	<div class='panel-heading' style='text-align:center;'><b>Restaurant Stats</b></div>
	<table class='table'>
		<thead>
			<tr>
				<th><b>Total Revenue</b></th>
				<th><b>Avg. Meal Cost</b></th>
				<th><b>Avg. Cost per Customer</b></th>
				<th><b>Avg. Meal Time</b></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>$<%= @revenue %></td>
				<td>$<%= @avg_price %></td>
				<td>$<%= @avg_customer_price %></td>
				<td><%= @avg_duration %> mins</td>
			</tr>
		</tbody>
	</table>
</div>


<div class='panel panel-default'>
	<div class='panel-heading' style='text-align:center;'><b>All Meals Served</b></div>
	<table class='table table-hover table-condensed'>
		<thead>
			<tr>
				<th>Date</th>
				<th>Total Price</th>
				<th>Menu Items</th>
				<th>Duration</th>
				<th>Diners</th>
				<th>Table</th>
			</tr>
		</thead>
		<tbody>
			<% @meals.each do |meal| %>
				<tr>
					<td><%= meal.created_at.httpdate %></td>
					<td>$<%= meal.price %></td>
					<td>
						<% meal.menu_items.each do |item| %>
							<%= link_to item.name, menu_item_path(item.id) %>
						<% end %>
					</td>
					<td><%= (meal.duration / 60.0).round(2) %> mins</td>
					<td><%= meal.diners %></td>
					<td><%= link_to meal.table.number, table_path(meal.table.id) %></td>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>





<h2>Revenue Breakdown Charts</h2>

<form id='radio-form'>
	<input type="radio" name='mode' id='restaurant' data='<%= @restaurant.id %>' checked> Menu Items
	<input type="radio" name='mode' id='menu' data='<%= @menu.id %>'> Menu Sections
	<input type="radio" name='mode' id='tables' data='<%= @menu.id %>'> Tables
</form>

<label><input type="checkbox" id='box'> Sort values</label>

<%= javascript_include_tag 'd3' %>
<%= javascript_include_tag 'bar_graph' %>



